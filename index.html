<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel de Gestão - Júlia Ribeiro</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <!-- Font Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Inter', sans-serif; }
        /* Animações simples */
        .fade-in { animation: fadeIn 0.2s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .slide-up { animation: slideUp 0.3s ease-out; }
        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        
        /* Cor Personalizada Júlia */
        .bg-julia { background-color: #940969; }
        .text-julia { color: #940969; }
        .border-julia { border-color: #940969; }
        .ring-julia { --tw-ring-color: #940969; }
        .hover-bg-julia-dark:hover { background-color: #740652; }
        .bg-julia-light { background-color: rgba(148, 9, 105, 0.1); }

        /* Dropdown Animation */
        .dropdown-enter {
            opacity: 0;
            transform: scale(0.95);
        }
        .dropdown-enter-active {
            opacity: 1;
            transform: scale(1);
            transition: opacity 100ms ease-out, transform 100ms ease-out;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800 h-screen flex overflow-hidden" onclick="closeAllDropdowns(event)">

    <!-- SIDEBAR -->
    <aside class="w-64 bg-white border-r border-gray-200 hidden md:flex flex-col flex-shrink-0">
        <div class="p-6 flex items-center gap-3 border-b border-gray-100">
            <!-- Ícone da Sidebar com a nova cor -->
            <div class="w-8 h-8 bg-[#940969] rounded-lg flex items-center justify-center shadow-sm">
                <i data-lucide="layout-dashboard" class="text-white w-5 h-5"></i>
            </div>
            <!-- Nome Atualizado -->
            <span class="font-bold text-lg text-gray-800 tracking-tight">Júlia Ribeiro</span>
        </div>

        <nav class="flex-1 p-4 space-y-2">
            <button onclick="switchTab('dashboard')" id="btn-dashboard" class="w-full flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium transition-colors text-gray-600 hover:bg-gray-50">
                <i data-lucide="bar-chart-3" class="w-5 h-5"></i>
                Visão Geral (KPIs)
            </button>
            <button onclick="switchTab('list')" id="btn-list" class="w-full flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium transition-colors bg-[#940969]/10 text-[#940969] shadow-sm">
                <i data-lucide="list-todo" class="w-5 h-5"></i>
                Lista de Tarefas
            </button>
        </nav>

        <div class="p-4 border-t border-gray-100">
            <div class="bg-gradient-to-br from-pink-50 to-purple-50 p-4 rounded-xl border border-pink-100">
                <h4 class="font-semibold text-[#940969] text-sm mb-1">Status do Sistema</h4>
                <div class="flex items-center gap-2 mt-2">
                    <span class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></span>
                    <p class="text-xs text-pink-700">Dados Sincronizados</p>
                </div>
                <p class="text-[10px] text-pink-400 mt-1">Última atualização: Hoje</p>
            </div>
        </div>
    </aside>

    <!-- CONTEÚDO PRINCIPAL -->
    <main class="flex-1 flex flex-col h-screen overflow-hidden">
        
        <!-- HEADER -->
        <header class="bg-white border-b border-gray-200 px-8 py-5 flex justify-between items-center flex-shrink-0 z-20 shadow-sm">
            <div>
                <h2 id="page-title" class="text-2xl font-bold text-gray-800">Gerenciamento de Tarefas</h2>
                <p class="text-sm text-gray-500 mt-1">Acompanhamento das planilhas mensais</p>
            </div>
            
            <div class="flex items-center gap-4">
                <!-- Botão Nova Tarefa com a nova cor -->
                <button onclick="openModal()" class="flex items-center gap-2 bg-[#940969] text-white px-5 py-2.5 rounded-lg hover:bg-[#740652] transition-colors shadow-md hover:shadow-lg transform active:scale-95 duration-150">
                    <i data-lucide="plus-circle" class="w-4 h-4"></i>
                    <span class="hidden sm:inline font-medium">Nova Tarefa</span>
                </button>
            </div>
        </header>

        <!-- AREA DE SCROLL -->
        <div class="flex-1 overflow-auto p-8">
            <div class="max-w-[1600px] mx-auto space-y-8">

                <!-- KPI CARDS (Dashboard) -->
                <div id="dashboard-view" class="hidden grid grid-cols-1 md:grid-cols-4 gap-6 slide-up">
                    <!-- Cards serão injetados via JS -->
                </div>

                <!-- BARRA DE FERRAMENTAS -->
                <div class="flex flex-col xl:flex-row justify-between items-start xl:items-center gap-4 bg-white p-5 rounded-xl border border-gray-200 shadow-sm">
                    <div class="relative w-full xl:w-96 group">
                        <i data-lucide="search" class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-4 h-4"></i>
                        <!-- Input com anel de foco na nova cor -->
                        <input type="text" id="searchInput" placeholder="Buscar tarefa, sistema ou município..." 
                               class="w-full pl-10 pr-4 py-2.5 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#940969] focus:border-transparent text-sm transition-shadow">
                    </div>
                    
                    <div class="flex flex-wrap items-center gap-3 w-full xl:w-auto">
                        <div class="flex items-center gap-2 px-3 py-2 bg-gray-50 rounded-lg border border-gray-100">
                            <i data-lucide="filter" class="w-4 h-4 text-gray-500"></i>
                            <span class="text-xs font-semibold text-gray-500 uppercase">Status:</span>
                            <select id="statusFilter" class="bg-transparent text-sm font-medium text-gray-700 focus:outline-none cursor-pointer">
                                <option value="Todos">Todos</option>
                                <option value="Não iniciada">Não iniciada</option>
                                <option value="Em execução">Em execução</option>
                                <option value="REPASSADO">Repassado</option>
                                <option value="Concluída">Concluída</option>
                            </select>
                        </div>

                        <div class="flex items-center gap-2 px-3 py-2 bg-gray-50 rounded-lg border border-gray-100">
                            <i data-lucide="building-2" class="w-4 h-4 text-gray-500"></i>
                            <span class="text-xs font-semibold text-gray-500 uppercase">Município:</span>
                            <select id="municipalityFilter" class="bg-transparent text-sm font-medium text-gray-700 focus:outline-none cursor-pointer max-w-[150px]">
                                <!-- Opções injetadas via JS -->
                            </select>
                        </div>
                    </div>
                </div>

                <!-- TABELA -->
                <div id="table-view" class="bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden flex flex-col">
                    <div class="overflow-x-auto">
                        <table class="w-full text-left text-sm text-gray-600">
                            <!-- CABEÇALHO ATUALIZADO -->
                            <thead class="bg-[#940969] text-white font-semibold border-b border-[#740652]">
                                <tr>
                                    <th class="px-6 py-4 whitespace-nowrap">ID / Tarefa</th>
                                    <th class="px-6 py-4">Município / Sistema</th>
                                    <th class="px-6 py-4 text-center">Prioridade</th>
                                    <th class="px-6 py-4 text-center">Status</th>
                                    <th class="px-6 py-4 w-32">Progresso</th>
                                    <!-- Novas Colunas -->
                                    <th class="px-6 py-4 text-right">Data de Inclusão</th>
                                    <th class="px-6 py-4 text-right">Prazo</th>
                                    <th class="px-6 py-4 w-10"></th>
                                </tr>
                            </thead>
                            <tbody id="tableBody" class="divide-y divide-gray-100">
                                <!-- Linhas injetadas via JS -->
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="bg-white border-t border-gray-200 px-6 py-4 flex items-center justify-between">
                        <span id="resultsCount" class="text-sm text-gray-500">Mostrando 0 resultados</span>
                        <div class="flex gap-2">
                            <button class="px-3 py-1 border border-gray-200 rounded text-sm text-gray-600 disabled:opacity-50" disabled>Anterior</button>
                            <button class="px-3 py-1 border border-gray-200 rounded text-sm text-gray-600 hover:bg-gray-50">Próximo</button>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </main>

    <!-- MODAL TAREFA (CRIAR/EDITAR) -->
    <div id="modal" class="hidden fixed inset-0 bg-black/40 backdrop-blur-sm z-50 flex items-center justify-center p-4 fade-in">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-lg overflow-hidden border border-gray-100 transform transition-all scale-100">
            <div class="px-6 py-4 border-b border-gray-100 flex justify-between items-center bg-gray-50">
                <h3 id="modalTitle" class="font-bold text-gray-800 text-lg">Nova Tarefa</h3>
                <button onclick="closeModal()" class="text-gray-400 hover:text-red-500 transition-colors">✕</button>
            </div>
            
            <form id="demandForm" class="p-6 space-y-5">
                <input type="hidden" name="id" id="demandId">
                
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-1.5">Descrição da Tarefa</label>
                    <input required name="title" id="inputTitle" type="text" class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#940969] outline-none text-sm" placeholder="Ex: Atualizar cadastro CNES...">
                </div>
                
                <div class="grid grid-cols-2 gap-5">
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-1.5">Município</label>
                        <select id="modalMunicipality" name="requester" class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#940969] outline-none text-sm bg-white">
                            <!-- Injetado via JS -->
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-1.5">Sistema / ID</label>
                        <select name="department" id="inputDepartment" class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#940969] outline-none text-sm bg-white">
                            <option value="Atenção Primária" selected>Atenção Primária</option>
                            <option value="BPA / FPO">BPA / FPO</option>
                            <option value="CADSUS">CADSUS</option>
                            <option value="CIHA">CIHA</option>
                            <option value="CNES">CNES</option>
                            <option value="e-SUS">e-SUS</option>
                            <option value="Gestão">Gestão</option>
                            <option value="SIA/SUS">SIA/SUS</option>
                            <option value="SIH/SUS">SIH/SUS</option>
                            <option value="Outros">Outros</option>
                        </select>
                    </div>
                </div>

                <div class="grid grid-cols-2 gap-5">
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-1.5">Prioridade</label>
                        <select name="priority" id="inputPriority" class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#940969] outline-none text-sm bg-white">
                            <option value="P0">P0 - Urgente</option>
                            <option value="P1">P1 - Alta</option>
                            <option value="P2" selected>P2 - Média</option>
                            <option value="P3">P3 - Baixa</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-1.5">Status Atual</label>
                        <select name="status" id="inputStatus" class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#940969] outline-none text-sm bg-white">
                            <option value="Não iniciada" selected>Não iniciada</option>
                            <option value="Em execução">Em execução</option>
                            <option value="REPASSADO">Repassado</option>
                            <option value="Concluída">Concluída</option>
                        </select>
                    </div>
                </div>

                <div class="grid grid-cols-2 gap-5">
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-1.5">Data de Inclusão</label>
                        <input name="inclusionDate" id="inputInclusionDate" type="date" class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#940969] outline-none text-sm">
                    </div>
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-1.5">Prazo Final</label>
                        <input name="deadline" id="inputDeadline" type="date" class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#940969] outline-none text-sm">
                    </div>
                </div>

                <div class="pt-6 flex justify-end gap-3 border-t border-gray-100 mt-2">
                    <button type="button" onclick="closeModal()" class="px-5 py-2.5 text-gray-700 hover:bg-gray-100 rounded-lg text-sm font-medium transition-colors">Cancelar</button>
                    <button type="submit" class="px-5 py-2.5 bg-[#940969] text-white hover:bg-[#740652] rounded-lg text-sm font-medium shadow-md">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // --- DADOS REAIS ATUALIZADOS ---
        // Adicionei inclusionDate para simular a nova coluna
        let demands = [
            { id: 'T-001', title: 'Procedimentos com % diferente FPO PMAE', department: 'BPA / FPO', priority: 'P0', requester: 'Camanducaia', status: 'Não iniciada', inclusionDate: '2025-06-29', deadline: '', progress: 0 },
            { id: 'T-002', title: 'Webnário terceiros e OCI', department: 'Outros', priority: 'P0', requester: 'Salto na Gestão', status: 'Não iniciada', inclusionDate: '2025-10-18', deadline: '', progress: 0 },
            { id: 'T-003', title: 'Dados POEPS - NOVEMBRO', department: 'Atenção Primária', priority: 'P0', requester: 'Itapeva', status: 'Concluída', inclusionDate: '2025-12-01', deadline: '2026-01-03', progress: 100 },
            { id: 'T-004', title: 'Cadastro LRPD', department: 'CNES', priority: 'P0', requester: 'Delfim Moreira', status: 'Não iniciada', inclusionDate: '2025-12-04', deadline: '', progress: 0 },
            { id: 'T-005', title: 'Cadastro programa APAE', department: 'CNES', priority: 'P0', requester: 'Cachoeira de Minas', status: 'Concluída', inclusionDate: '2025-12-12', deadline: '2026-01-09', progress: 100 },
            { id: 'T-006', title: 'Atualizar site planejamento POEPS JAN 26', department: 'Atenção Primária', priority: 'P0', requester: 'Cachoeira de Minas', status: 'Concluída', inclusionDate: '2025-12-23', deadline: '2026-01-03', progress: 100 },
            { id: 'T-007', title: 'Atualizar site planejamento POEPS JAN 26', department: 'Atenção Primária', priority: 'P0', requester: 'Camanducaia', status: 'Concluída', inclusionDate: '2025-12-23', deadline: '2026-01-03', progress: 100 },
            { id: 'T-008', title: 'Atualizar site planejamento POEPS JAN 26', department: 'Atenção Primária', priority: 'P0', requester: 'Córrego do Bom Jesus', status: 'Concluída', inclusionDate: '2025-12-23', deadline: '2026-01-03', progress: 100 },
            { id: 'T-009', title: 'Atualizar site planejamento POEPS JAN 26', department: 'Atenção Primária', priority: 'P0', requester: 'Delfim Moreira', status: 'Concluída', inclusionDate: '2025-12-23', deadline: '2026-01-03', progress: 100 },
            { id: 'T-010', title: 'Atualizar site planejamento POEPS JAN 26', department: 'Atenção Primária', priority: 'P0', requester: 'Itapeva', status: 'Concluída', inclusionDate: '2025-12-23', deadline: '2026-01-03', progress: 100 },
            { id: 'T-011', title: 'Atualizar site planejamento POEPS JAN 26', department: 'Atenção Primária', priority: 'P0', requester: 'Pedralva', status: 'Concluída', inclusionDate: '2025-12-23', deadline: '2026-01-03', progress: 100 },
            { id: 'T-012', title: 'Atualizar site MANUAL INTERATIVO CID10 CIAP 2', department: 'Atenção Primária', priority: 'P0', requester: 'Salto na Gestão', status: 'Concluída', inclusionDate: '2025-12-23', deadline: '2026-01-03', progress: 100 },
            { id: 'T-013', title: 'Incluir acompanhamento quadrimestre POEPS site Planejamento', department: 'Atenção Primária', priority: 'P0', requester: 'Salto na Gestão', status: 'Concluída', inclusionDate: '2025-12-23', deadline: '2026-01-03', progress: 100 },
            { id: 'T-014', title: 'Verificar lançamentos POEPS DEZEMBRO 25', department: 'Atenção Primária', priority: 'P0', requester: 'Cachoeira de Minas', status: 'Concluída', inclusionDate: '2025-12-23', deadline: '2026-01-03', progress: 100 },
            { id: 'T-015', title: 'Verificar lançamentos POEPS DEZEMBRO 25', department: 'Atenção Primária', priority: 'P0', requester: 'Camanducaia', status: 'Concluída', inclusionDate: '2025-12-23', deadline: '2026-01-03', progress: 100 },
            { id: 'T-016', title: 'Verificar lançamentos POEPS DEZEMBRO 25', department: 'Atenção Primária', priority: 'P0', requester: 'Córrego do Bom Jesus', status: 'Concluída', inclusionDate: '2025-12-23', deadline: '2026-01-05', progress: 100 },
            { id: 'T-017', title: 'Verificar lançamentos POEPS DEZEMBRO 25', department: 'Atenção Primária', priority: 'P0', requester: 'Delfim Moreira', status: 'Concluída', inclusionDate: '2025-12-23', deadline: '2026-01-03', progress: 100 },
            { id: 'T-018', title: 'Verificar lançamentos POEPS DEZEMBRO 25', department: 'Atenção Primária', priority: 'P0', requester: 'Itapeva', status: 'Concluída', inclusionDate: '2025-12-23', deadline: '2026-01-03', progress: 100 },
            { id: 'T-019', title: 'Verificar lançamentos POEPS DEZEMBRO 25', department: 'Atenção Primária', priority: 'P0', requester: 'Pedralva', status: 'Concluída', inclusionDate: '2025-12-23', deadline: '2026-01-03', progress: 100 },
            { id: 'T-020', title: 'Atualizar site COFINANCIAMENTO (Qualidade e vínculo)', department: 'Atenção Primária', priority: 'P0', requester: 'Cachoeira de Minas', status: 'Concluída', inclusionDate: '2025-12-27', deadline: '2026-01-07', progress: 100 },
            { id: 'T-021', title: 'Atualizar site COFINANCIAMENTO (Qualidade e vínculo)', department: 'Atenção Primária', priority: 'P0', requester: 'Camanducaia', status: 'Concluída', inclusionDate: '2025-12-27', deadline: '2026-01-03', progress: 100 },
            { id: 'T-022', title: 'Atualizar site COFINANCIAMENTO (Qualidade e vínculo)', department: 'Atenção Primária', priority: 'P0', requester: 'Córrego do Bom Jesus', status: 'Concluída', inclusionDate: '2025-12-27', deadline: '2026-01-03', progress: 100 },
            { id: 'T-023', title: 'Atualizar site COFINANCIAMENTO (Qualidade e vínculo)', department: 'Atenção Primária', priority: 'P0', requester: 'Delfim Moreira', status: 'Concluída', inclusionDate: '2025-12-27', deadline: '2026-01-05', progress: 100 },
            { id: 'T-024', title: 'Atualizar site COFINANCIAMENTO (Qualidade e vínculo)', department: 'Atenção Primária', priority: 'P0', requester: 'Itapeva', status: 'REPASSADO', inclusionDate: '2025-12-27', deadline: '2026-01-03', progress: 50 },
            { id: 'T-025', title: 'Atualizar site COFINANCIAMENTO (Qualidade e vínculo)', department: 'Atenção Primária', priority: 'P0', requester: 'Pedralva', status: 'Concluída', inclusionDate: '2025-12-27', deadline: '2026-01-03', progress: 100 },
            { id: 'T-026', title: 'Atualizar site POEPS DEZEMBRO 25', department: 'Atenção Primária', priority: 'P0', requester: 'Cachoeira de Minas', status: 'Concluída', inclusionDate: '2025-12-27', deadline: '2026-01-03', progress: 100 },
            { id: 'T-027', title: 'Atualizar site POEPS DEZEMBRO 25', department: 'Atenção Primária', priority: 'P0', requester: 'Camanducaia', status: 'Concluída', inclusionDate: '2025-12-27', deadline: '2026-01-03', progress: 100 },
            { id: 'T-028', title: 'Atualizar site POEPS DEZEMBRO 25', department: 'Atenção Primária', priority: 'P0', requester: 'Córrego do Bom Jesus', status: 'Concluída', inclusionDate: '2025-12-27', deadline: '2026-01-05', progress: 100 },
            { id: 'T-029', title: 'Atualizar site POEPS DEZEMBRO 25', department: 'Atenção Primária', priority: 'P0', requester: 'Delfim Moreira', status: 'Concluída', inclusionDate: '2025-12-27', deadline: '2026-01-03', progress: 100 },
            { id: 'T-030', title: 'Atualizar site POEPS DEZEMBRO 25', department: 'Atenção Primária', priority: 'P0', requester: 'Itapeva', status: 'Concluída', inclusionDate: '2025-12-27', deadline: '2026-01-03', progress: 100 },
            { id: 'T-031', title: 'Atualizar site POEPS DEZEMBRO 25', department: 'Atenção Primária', priority: 'P0', requester: 'Pedralva', status: 'Concluída', inclusionDate: '2025-12-27', deadline: '2026-01-03', progress: 100 },
            { id: 'T-032', title: 'Atualizar site POEPS 3Q 25', department: 'Atenção Primária', priority: 'P0', requester: 'Cachoeira de Minas', status: 'Concluída', inclusionDate: '2025-12-27', deadline: '2026-01-03', progress: 100 },
            { id: 'T-033', title: 'Atualizar site POEPS 3Q 25', department: 'Atenção Primária', priority: 'P0', requester: 'Camanducaia', status: 'Concluída', inclusionDate: '2025-12-27', deadline: '2026-01-03', progress: 100 },
            { id: 'T-034', title: 'Atualizar site POEPS 3Q 25', department: 'Atenção Primária', priority: 'P0', requester: 'Córrego do Bom Jesus', status: 'Concluída', inclusionDate: '2025-12-27', deadline: '2026-01-05', progress: 100 },
            { id: 'T-035', title: 'Atualizar site POEPS 3Q 25', department: 'Atenção Primária', priority: 'P0', requester: 'Delfim Moreira', status: 'Concluída', inclusionDate: '2025-12-27', deadline: '2026-01-03', progress: 100 },
            { id: 'T-036', title: 'Atualizar site POEPS 3Q 25', department: 'Atenção Primária', priority: 'P0', requester: 'Itapeva', status: 'Concluída', inclusionDate: '2025-12-27', deadline: '2026-01-03', progress: 100 },
            { id: 'T-037', title: 'Atualizar site POEPS 3Q 25', department: 'Atenção Primária', priority: 'P0', requester: 'Pedralva', status: 'Concluída', inclusionDate: '2025-12-27', deadline: '2026-01-03', progress: 100 },
            { id: 'T-038', title: 'Atualizar site PSE PLANEJAMENTO JANEIRO 26', department: 'Atenção Primária', priority: 'P0', requester: 'Cachoeira de Minas', status: 'Concluída', inclusionDate: '2025-12-30', deadline: '2026-01-03', progress: 100 },
            { id: 'T-039', title: 'Atualizar site PSE PLANEJAMENTO JANEIRO 26', department: 'Atenção Primária', priority: 'P0', requester: 'Camanducaia', status: 'Concluída', inclusionDate: '2025-12-30', deadline: '2026-01-03', progress: 100 },
            { id: 'T-040', title: 'Atualizar site PSE PLANEJAMENTO JANEIRO 26', department: 'Atenção Primária', priority: 'P0', requester: 'Córrego do Bom Jesus', status: 'Concluída', inclusionDate: '2025-12-30', deadline: '2026-01-03', progress: 100 },
            { id: 'T-041', title: 'Atualizar site PSE PLANEJAMENTO JANEIRO 26', department: 'Atenção Primária', priority: 'P0', requester: 'Delfim Moreira', status: 'Concluída', inclusionDate: '2025-12-30', deadline: '2026-01-03', progress: 100 },
            { id: 'T-042', title: 'Atualizar site PSE PLANEJAMENTO JANEIRO 26', department: 'Atenção Primária', priority: 'P0', requester: 'Itapeva', status: 'Concluída', inclusionDate: '2025-12-30', deadline: '2026-01-03', progress: 100 },
            { id: 'T-043', title: 'Atualizar site PSE PLANEJAMENTO JANEIRO 26', department: 'Atenção Primária', priority: 'P0', requester: 'Pedralva', status: 'Concluída', inclusionDate: '2025-12-30', deadline: '2026-01-03', progress: 100 },
            { id: 'T-044', title: 'Atualizar site Planejamento - GITHUB', department: 'Atenção Primária', priority: 'P0', requester: 'Salto na Gestão', status: 'Concluída', inclusionDate: '2025-12-30', deadline: '2026-01-03', progress: 100 },
            { id: 'T-045', title: 'Atualizar site Manual - GITHUB', department: 'Atenção Primária', priority: 'P0', requester: 'Salto na Gestão', status: 'Concluída', inclusionDate: '2025-12-30', deadline: '2026-01-03', progress: 100 },
            { id: 'T-046', title: 'Gravar vídeo para reals MANUAL INTERATIVO', department: 'Atenção Primária', priority: 'P0', requester: 'Salto na Gestão', status: 'Concluída', inclusionDate: '2025-12-30', deadline: '2026-01-03', progress: 100 },
            { id: 'T-047', title: 'Gravar vídeo para MUNICÍPIOS - MANUAL INTERATIVO', department: 'Atenção Primária', priority: 'P0', requester: 'Salto na Gestão', status: 'Concluída', inclusionDate: '2025-12-30', deadline: '2026-01-03', progress: 100 },
            { id: 'T-048', title: 'Demanda KELLEN PLANEJAMENTO 2026', department: 'Atenção Primária', priority: 'P0', requester: 'Salto na Gestão', status: 'Concluída', inclusionDate: '2026-01-02', deadline: '2026-01-04', progress: 100 },
            { id: 'T-049', title: 'Solicitar ARLETE ENVIO DADOS INDICADORES', department: 'Atenção Primária', priority: 'P0', requester: 'Cachoeira de Minas', status: 'Concluída', inclusionDate: '2026-01-05', deadline: '2026-01-05', progress: 100 },
            { id: 'T-050', title: 'Solicitar ATUALIZAÇÃO ESUS FEEDBACK', department: 'Atenção Primária', priority: 'P0', requester: 'Delfim Moreira', status: 'Concluída', inclusionDate: '2026-01-05', deadline: '2026-01-05', progress: 100 },
            { id: 'T-051', title: 'Enviar feedback municípios', department: 'Atenção Primária', priority: 'P0', requester: 'Salto na Gestão', status: 'Concluída', inclusionDate: '2026-01-05', deadline: '2026-01-05', progress: 100 },
            { id: 'T-052', title: 'Usuário ACS Emanuela', department: 'e-SUS', priority: 'P0', requester: 'Itapeva', status: 'Concluída', inclusionDate: '2026-01-05', deadline: '2026-01-05', progress: 100 },
            { id: 'T-053', title: 'Atualizar classificação indicador C7 SITE', department: 'Atenção Primária', priority: 'P0', requester: 'Salto na Gestão', status: 'Concluída', inclusionDate: '2026-01-05', deadline: '2026-01-05', progress: 100 },
            { id: 'T-054', title: 'Cadastro ACS Eleandro SÃO MATEUS', department: 'e-SUS', priority: 'P0', requester: 'Camanducaia', status: 'Concluída', inclusionDate: '2026-01-05', deadline: '2026-01-05', progress: 100 },
            { id: 'T-055', title: 'Cadastro ACS Eleandro SÃO MATEUS', department: 'CNES', priority: 'P0', requester: 'Camanducaia', status: 'Concluída', inclusionDate: '2026-01-05', deadline: '2026-01-05', progress: 100 },
            { id: 'T-056', title: 'Verificar ESUS FORA DO AR', department: 'e-SUS', priority: 'P0', requester: 'Córrego do Bom Jesus', status: 'Concluída', inclusionDate: '2026-01-05', deadline: '2026-01-05', progress: 100 },
            { id: 'T-057', title: 'Demanda ANA PAULA PLANEJAMENTO', department: 'Atenção Primária', priority: 'P0', requester: 'Córrego do Bom Jesus', status: 'Concluída', inclusionDate: '2026-01-05', deadline: '2026-01-05', progress: 100 },
            { id: 'T-058', title: 'Verificar ações realizadas PSE 2025', department: 'Atenção Primária', priority: 'P0', requester: 'Salto na Gestão', status: 'Concluída', inclusionDate: '2026-01-05', deadline: '2026-01-05', progress: 100 },
            { id: 'T-059', title: 'Dar feedback municípios ações realizadas PSE 2025', department: 'Atenção Primária', priority: 'P0', requester: 'Salto na Gestão', status: 'Concluída', inclusionDate: '2026-01-05', deadline: '2026-01-06', progress: 100 },
            { id: 'T-060', title: 'Alterar planejamento PSE 2026', department: 'Atenção Primária', priority: 'P0', requester: 'Salto na Gestão', status: 'Concluída', inclusionDate: '2026-01-05', deadline: '2026-01-06', progress: 100 },
            { id: 'T-061', title: 'Cadastro ACS Fabiana PONTE NOVA', department: 'e-SUS', priority: 'P0', requester: 'Camanducaia', status: 'Concluída', inclusionDate: '2026-01-05', deadline: '2026-01-05', progress: 100 },
            { id: 'T-062', title: 'Cadastro ACS Fabiana PONTE NOVA', department: 'CNES', priority: 'P0', requester: 'Camanducaia', status: 'Concluída', inclusionDate: '2026-01-05', deadline: '2026-01-05', progress: 100 },
            { id: 'T-063', title: 'Verificar sobre centro de convivência Cachoeira', department: 'CNES', priority: 'P0', requester: 'Cachoeira de Minas', status: 'Em execução', inclusionDate: '2026-01-05', deadline: '', progress: 50 },
            { id: 'T-064', title: 'Verificar sobre fechamento 12/25', department: 'SIA/SUS', priority: 'P0', requester: 'Cachoeira de Minas', status: 'Concluída', inclusionDate: '2026-01-05', deadline: '2026-01-12', progress: 100 },
            { id: 'T-065', title: 'Cadastro ACS Antonella CRUZEIRO', department: 'e-SUS', priority: 'P0', requester: 'Camanducaia', status: 'Concluída', inclusionDate: '2026-01-05', deadline: '2026-01-05', progress: 100 },
            { id: 'T-066', title: 'Cadastro ACS Antonella CRUZEIRO', department: 'CNES', priority: 'P0', requester: 'Camanducaia', status: 'Concluída', inclusionDate: '2026-01-05', deadline: '2026-01-05', progress: 100 },
            { id: 'T-067', title: 'Cadastro ACS Marcia CRUZEIRO', department: 'e-SUS', priority: 'P0', requester: 'Camanducaia', status: 'Concluída', inclusionDate: '2026-01-05', deadline: '2026-01-05', progress: 100 },
            { id: 'T-068', title: 'Cadastro ACS Marcia CRUZEIRO', department: 'CNES', priority: 'P0', requester: 'Camanducaia', status: 'Concluída', inclusionDate: '2026-01-05', deadline: '2026-01-05', progress: 100 },
            { id: 'T-069', title: 'ACS que sairam CRUZEIRO', department: 'e-SUS', priority: 'P0', requester: 'Camanducaia', status: 'Concluída', inclusionDate: '2026-01-05', deadline: '2026-01-05', progress: 100 },
            { id: 'T-070', title: 'ACS que sairam CRUZEIRO', department: 'CNES', priority: 'P0', requester: 'Camanducaia', status: 'Concluída', inclusionDate: '2026-01-05', deadline: '2026-01-05', progress: 100 },
            { id: 'T-071', title: 'Caso médica SEM VINCULO EQUIPE', department: 'CNES', priority: 'P0', requester: 'Cachoeira de Minas', status: 'Concluída', inclusionDate: '2026-01-05', deadline: '2026-01-08', progress: 100 },
            { id: 'T-072', title: 'Atualizar aquivo único', department: 'CNES', priority: 'P0', requester: 'Camanducaia', status: 'Concluída', inclusionDate: '2026-01-05', deadline: '2026-01-05', progress: 100 },
            { id: 'T-073', title: 'Exportar e transmitir MS', department: 'CNES', priority: 'P0', requester: 'Camanducaia', status: 'Concluída', inclusionDate: '2026-01-05', deadline: '2026-01-05', progress: 100 },
            { id: 'T-074', title: 'Demanda FERNANDA', department: 'SIA/SUS', priority: 'P0', requester: 'Camanducaia', status: 'Concluída', inclusionDate: '2026-01-05', deadline: '2026-01-05', progress: 100 },
            { id: 'T-075', title: 'Exclusão Ana Laura Gomes de Oliveira', department: 'CNES', priority: 'P0', requester: 'Cachoeira de Minas', status: 'Concluída', inclusionDate: '2026-01-05', deadline: '2026-01-08', progress: 100 },
            { id: 'T-076', title: 'Demanda Kellen relatório Saúde Bucal', department: 'e-SUS', priority: 'P1', requester: 'Itapeva', status: 'Concluída', inclusionDate: '2026-01-05', deadline: '2026-01-05', progress: 100 },
            { id: 'T-077', title: 'Alterações ENVIADAS ARLETE', department: 'CNES', priority: 'P0', requester: 'Cachoeira de Minas', status: 'Concluída', inclusionDate: '2026-01-05', deadline: '2026-01-08', progress: 100 },
            { id: 'T-078', title: 'Exportar e transmitir MS', department: 'CNES', priority: 'P0', requester: 'Camanducaia', status: 'Concluída', inclusionDate: '2026-01-05', deadline: '2026-01-05', progress: 100 },
            { id: 'T-079', title: 'Organizar arquivos recebidos email', department: 'Outros', priority: 'P0', requester: 'Camanducaia', status: 'Concluída', inclusionDate: '2026-01-05', deadline: '2026-01-05', progress: 100 },
            { id: 'T-080', title: 'Cadas ADM SMS REGULAÇÃO', department: 'CNES', priority: 'P0', requester: 'Camanducaia', status: 'Concluída', inclusionDate: '2026-01-05', deadline: '2026-01-05', progress: 100 },
            { id: 'T-081', title: 'Cadas ADM SMS REGULAÇÃO', department: 'e-SUS', priority: 'P0', requester: 'Camanducaia', status: 'Concluída', inclusionDate: '2026-01-05', deadline: '2026-01-05', progress: 100 },
            { id: 'T-082', title: 'Cadastro profissionais CAE', department: 'CNES', priority: 'P0', requester: 'Camanducaia', status: 'Não iniciada', inclusionDate: '2026-01-05', deadline: '', progress: 0 },
            { id: 'T-083', title: 'Organizar ações prioritárias PSE', department: 'Atenção Primária', priority: 'P0', requester: 'Salto na Gestão', status: 'Concluída', inclusionDate: '2026-01-05', deadline: '2026-01-06', progress: 100 },
            { id: 'T-084', title: 'Demanda ABMV CIHA', department: 'CIHA', priority: 'P0', requester: 'Camanducaia', status: 'Concluída', inclusionDate: '2026-01-06', deadline: '2026-01-06', progress: 100 },
            { id: 'T-085', title: 'Incluir monitoramento PSE AÇÕES PRIORITÁRIAS', department: 'Atenção Primária', priority: 'P0', requester: 'Salto na Gestão', status: 'Concluída', inclusionDate: '2026-01-06', deadline: '2026-01-06', progress: 100 },
            { id: 'T-086', title: 'Agenda Geani PSICOLOGA', department: 'e-SUS', priority: 'P0', requester: 'Itapeva', status: 'Concluída', inclusionDate: '2026-01-06', deadline: '2026-01-06', progress: 100 },
            { id: 'T-087', title: 'Importar CIHA + RELATÓRIOS', department: 'CIHA', priority: 'P0', requester: 'Camanducaia', status: 'Concluída', inclusionDate: '2026-01-06', deadline: '2026-01-07', progress: 100 },
            { id: 'T-088', title: 'Exportar e transmitir MS 12/25', department: 'CIHA', priority: 'P0', requester: 'Camanducaia', status: 'Concluída', inclusionDate: '2026-01-06', deadline: '2026-01-07', progress: 100 },
            { id: 'T-089', title: 'Cadastro AUX ADM LOTEAMENTO', department: 'e-SUS', priority: 'P0', requester: 'Camanducaia', status: 'Concluída', inclusionDate: '2026-01-07', deadline: '2026-01-07', progress: 100 },
            { id: 'T-090', title: 'Cadastro AUX ADM LOTEAMENTO', department: 'CNES', priority: 'P0', requester: 'Camanducaia', status: 'Concluída', inclusionDate: '2026-01-07', deadline: '2026-01-07', progress: 100 },
            { id: 'T-091', title: 'Email cadastro CAE', department: 'Outros', priority: 'P0', requester: 'Camanducaia', status: 'Concluída', inclusionDate: '2026-01-07', deadline: '2026-01-07', progress: 100 },
            { id: 'T-092', title: 'Realizar cadastro CAE', department: 'CNES', priority: 'P0', requester: 'Camanducaia', status: 'Não iniciada', inclusionDate: '2026-01-07', deadline: '', progress: 0 },
            { id: 'T-093', title: 'Feedback indicadores de qualidade', department: 'Atenção Primária', priority: 'P0', requester: 'Cachoeira de Minas', status: 'Concluída', inclusionDate: '2026-01-07', deadline: '2026-01-07', progress: 100 },
            { id: 'T-094', title: 'Demanda Adriele indicadores', department: 'Atenção Primária', priority: 'P0', requester: 'Córrego do Bom Jesus', status: 'Concluída', inclusionDate: '2026-01-07', deadline: '2026-01-07', progress: 100 },
            { id: 'T-095', title: 'Senha ACS Emanuela', department: 'e-SUS', priority: 'P0', requester: 'Itapeva', status: 'Concluída', inclusionDate: '2026-01-07', deadline: '2026-01-07', progress: 100 },
            { id: 'T-096', title: 'Caso Gestante - REPASSAR SUPORTE', department: 'Atenção Primária', priority: 'P0', requester: 'Córrego do Bom Jesus', status: 'Concluída', inclusionDate: '2026-01-07', deadline: '2026-01-07', progress: 100 },
            { id: 'T-097', title: 'Verificar cadastro PMS 26-29 DigiSUS', department: 'Gestão', priority: 'P0', requester: 'Camanducaia', status: 'REPASSADO', inclusionDate: '2026-01-08', deadline: '2026-01-16', progress: 50 },
            { id: 'T-098', title: 'COREN LOYDI', department: 'CNES', priority: 'P0', requester: 'Camanducaia', status: 'Concluída', inclusionDate: '2026-01-08', deadline: '2026-01-08', progress: 100 },
            { id: 'T-099', title: 'Demanda RUBIA AGENDA', department: 'Atenção Primária', priority: 'P0', requester: 'Delfim Moreira', status: 'Concluída', inclusionDate: '2026-01-08', deadline: '2026-01-08', progress: 100 },
            { id: 'T-100', title: 'Atualizar aquivo único', department: 'CNES', priority: 'P0', requester: 'Camanducaia', status: 'Concluída', inclusionDate: '2026-01-08', deadline: '2026-01-08', progress: 100 },
            { id: 'T-101', title: 'Exportar e transmitir MS', department: 'CNES', priority: 'P0', requester: 'Camanducaia', status: 'Concluída', inclusionDate: '2026-01-08', deadline: '2026-01-08', progress: 100 },
            { id: 'T-102', title: 'Cadastro clínica odontológica SOLICITAÇÃO', department: 'CNES', priority: 'P0', requester: 'Camanducaia', status: 'Concluída', inclusionDate: '2026-01-08', deadline: '2026-01-12', progress: 100 },
            { id: 'T-103', title: 'Reinstalar CNES', department: 'CNES', priority: 'P0', requester: 'Cachoeira de Minas', status: 'Concluída', inclusionDate: '2026-01-08', deadline: '2026-01-08', progress: 100 },
            { id: 'T-104', title: 'Solicitar base CNES', department: 'CNES', priority: 'P0', requester: 'Cachoeira de Minas', status: 'Concluída', inclusionDate: '2026-01-08', deadline: '2026-01-08', progress: 100 },
            { id: 'T-105', title: 'Restaurar base', department: 'CNES', priority: 'P0', requester: 'Cachoeira de Minas', status: 'Concluída', inclusionDate: '2026-01-08', deadline: '2026-01-08', progress: 100 },
            { id: 'T-106', title: 'Atualizar aquivo único', department: 'CNES', priority: 'P0', requester: 'Cachoeira de Minas', status: 'Concluída', inclusionDate: '2026-01-08', deadline: '2026-01-09', progress: 100 },
            { id: 'T-107', title: 'Exportar e transmitir MS', department: 'CNES', priority: 'P0', requester: 'Cachoeira de Minas', status: 'REPASSADO', inclusionDate: '2026-01-08', deadline: '2026-01-09', progress: 50 },
            { id: 'T-108', title: 'Problema Tablet emanuele', department: 'Atenção Primária', priority: 'P0', requester: 'Itapeva', status: 'Concluída', inclusionDate: '2026-01-09', deadline: '2026-01-09', progress: 100 },
            { id: 'T-109', title: 'Reunião Kellen', department: 'Outros', priority: 'P0', requester: 'Salto na Gestão', status: 'Concluída', inclusionDate: '2026-01-11', deadline: '2026-01-11', progress: 100 },
            { id: 'T-110', title: 'Relatórios de Busca Ativa', department: 'Atenção Primária', priority: 'P0', requester: 'Cachoeira de Minas', status: 'Concluída', inclusionDate: '2026-01-10', deadline: '2026-01-12', progress: 100 },
            { id: 'T-111', title: 'Relatórios de Busca Ativa', department: 'Atenção Primária', priority: 'P0', requester: 'Camanducaia', status: 'Concluída', inclusionDate: '2026-01-10', deadline: '2026-01-10', progress: 100 },
            { id: 'T-112', title: 'Relatórios de Busca Ativa', department: 'Atenção Primária', priority: 'P0', requester: 'Córrego do Bom Jesus', status: 'Concluída', inclusionDate: '2026-01-10', deadline: '2026-01-10', progress: 100 },
            { id: 'T-113', title: 'Relatórios de Busca Ativa', department: 'Atenção Primária', priority: 'P0', requester: 'Delfim Moreira', status: 'Concluída', inclusionDate: '2026-01-10', deadline: '2026-01-11', progress: 100 },
            { id: 'T-114', title: 'Relatórios Nominais', department: 'Atenção Primária', priority: 'P0', requester: 'Itapeva', status: 'Concluída', inclusionDate: '2026-01-10', deadline: '2026-01-11', progress: 100 },
            { id: 'T-115', title: 'Relatórios de Busca Ativa', department: 'Atenção Primária', priority: 'P0', requester: 'Pedralva', status: 'Concluída', inclusionDate: '2026-01-10', deadline: '2026-01-11', progress: 100 },
            { id: 'T-116', title: 'Enviar relatórios municípios', department: 'Atenção Primária', priority: 'P0', requester: 'Salto na Gestão', status: 'Concluída', inclusionDate: '2026-01-12', deadline: '2026-01-12', progress: 100 },
            { id: 'T-117', title: 'Senha ACS Emanuela', department: 'e-SUS', priority: 'P0', requester: 'Itapeva', status: 'Concluída', inclusionDate: '2026-01-12', deadline: '2026-01-12', progress: 100 },
            { id: 'T-118', title: 'Senha Vanderleia', department: 'e-SUS', priority: 'P0', requester: 'Itapeva', status: 'Concluída', inclusionDate: '2026-01-12', deadline: '2026-01-12', progress: 100 },
            { id: 'T-119', title: 'Cadastro ACS LARISSA SÃO MATEUS', department: 'e-SUS', priority: 'P0', requester: 'Camanducaia', status: 'Concluída', inclusionDate: '2026-01-12', deadline: '2026-01-12', progress: 100 },
            { id: 'T-120', title: 'Cadastro ACS LARISSA SÃO MATEUS', department: 'CNES', priority: 'P0', requester: 'Camanducaia', status: 'Concluída', inclusionDate: '2026-01-12', deadline: '2026-01-12', progress: 100 },
            { id: 'T-121', title: 'BCK CNES', department: 'CNES', priority: 'P0', requester: 'Camanducaia', status: 'Concluída', inclusionDate: '2026-01-12', deadline: '2026-01-12', progress: 100 },
            { id: 'T-122', title: 'BCK CNES', department: 'CNES', priority: 'P0', requester: 'Cachoeira de Minas', status: 'Concluída', inclusionDate: '2026-01-12', deadline: '2026-01-12', progress: 100 },
            { id: 'T-123', title: 'Cadastro LRPD - VERIFICAR MUDANÇA DE FAIXA', department: 'CNES', priority: 'P0', requester: 'Cachoeira de Minas', status: 'Concluída', inclusionDate: '2026-01-12', deadline: '2026-01-16', progress: 100 },
            { id: 'T-124', title: 'Acesso ELEANDRO ACS', department: 'e-SUS', priority: 'P0', requester: 'Camanducaia', status: 'Concluída', inclusionDate: '2026-01-13', deadline: '2026-01-13', progress: 100 },
            { id: 'T-125', title: 'Acesso ANA PAULA', department: 'e-SUS', priority: 'P0', requester: 'Camanducaia', status: 'Concluída', inclusionDate: '2026-01-13', deadline: '2026-01-13', progress: 100 },
            { id: 'T-126', title: 'Demanda Kellen relatórios', department: 'e-SUS', priority: 'P0', requester: 'Salto na Gestão', status: 'Concluída', inclusionDate: '2026-01-14', deadline: '2026-01-14', progress: 100 },
            { id: 'T-127', title: 'Instalar sistemas', department: 'BPA / FPO', priority: 'P0', requester: 'Cachoeira de Minas', status: 'Concluída', inclusionDate: '2026-01-14', deadline: '2026-01-14', progress: 100 },
            { id: 'T-128', title: 'Atualizar versão sistemas', department: 'BPA / FPO', priority: 'P0', requester: 'Cachoeira de Minas', status: 'Concluída', inclusionDate: '2026-01-14', deadline: '2026-01-14', progress: 100 },
            { id: 'T-129', title: 'PMS Camanducaia Digisus', department: 'Outros', priority: 'P0', requester: 'Camanducaia', status: 'REPASSADO', inclusionDate: '2026-01-14', deadline: '2026-01-15', progress: 50 },
            { id: 'T-130', title: 'Atualizar sistemas 11/25', department: 'BPA / FPO', priority: 'P0', requester: 'Cachoeira de Minas', status: 'Concluída', inclusionDate: '2026-01-14', deadline: '2026-01-16', progress: 100 },
            { id: 'T-131', title: 'FPO UBS 11/25', department: 'BPA / FPO', priority: 'P0', requester: 'Cachoeira de Minas', status: 'Não iniciada', inclusionDate: '2026-01-14', deadline: '', progress: 0 },
            { id: 'T-132', title: 'FPO LABORATORIO 11/25', department: 'BPA / FPO', priority: 'P0', requester: 'Cachoeira de Minas', status: 'Não iniciada', inclusionDate: '2026-01-14', deadline: '', progress: 0 },
            { id: 'T-133', title: 'Mandar vídeo cadastro clínica vanessa.', department: 'CNES', priority: 'P0', requester: 'Camanducaia', status: 'Concluída', inclusionDate: '2026-01-14', deadline: '2026-01-14', progress: 100 },
            { id: 'T-134', title: 'Alterar acessos terezinha', department: 'CNES', priority: 'P0', requester: 'Cachoeira de Minas', status: 'Concluída', inclusionDate: '2026-01-14', deadline: '2026-01-16', progress: 100 },
            { id: 'T-135', title: 'Atualizar SIHD2 12/25', department: 'SIH/SUS', priority: 'P0', requester: 'Camanducaia', status: 'Concluída', inclusionDate: '2026-01-15', deadline: '2026-01-16', progress: 100 },
            { id: 'T-136', title: 'Atualizar aquivos SIHD2 12/25', department: 'SIH/SUS', priority: 'P0', requester: 'Camanducaia', status: 'Concluída', inclusionDate: '2026-01-15', deadline: '2026-01-16', progress: 100 },
            { id: 'T-137', title: 'Importar arquivo + inconsistencias Alyne', department: 'SIH/SUS', priority: 'P0', requester: 'Camanducaia', status: 'Concluída', inclusionDate: '2026-01-15', deadline: '2026-01-16', progress: 100 },
            { id: 'T-138', title: 'Atualizar sistemas 12/25', department: 'BPA / FPO', priority: 'P0', requester: 'Camanducaia', status: 'Concluída', inclusionDate: '2026-01-15', deadline: '2026-01-16', progress: 100 },
            { id: 'T-139', title: 'Atualizar arquivos 12/25', department: 'BPA / FPO', priority: 'P0', requester: 'Camanducaia', status: 'Concluída', inclusionDate: '2026-01-15', deadline: '2026-01-16', progress: 100 },
            { id: 'T-140', title: 'Reimportar arquivo AIH 12/25', department: 'SIH/SUS', priority: 'P0', requester: 'Camanducaia', status: 'Concluída', inclusionDate: '2026-01-16', deadline: '2026-01-16', progress: 100 },
            { id: 'T-141', title: 'Exportação + relatórios 12/25', department: 'SIH/SUS', priority: 'P0', requester: 'Camanducaia', status: 'Não iniciada', inclusionDate: '2026-01-16', deadline: '2026-01-16', progress: 0 },
            { id: 'T-142', title: 'Transmitir MS 12/25', department: 'SIH/SUS', priority: 'P0', requester: 'Camanducaia', status: 'Não iniciada', inclusionDate: '2026-01-16', deadline: '2026-01-16', progress: 0 },
            { id: 'T-143', title: 'Dúvida ABMV CASSIA', department: 'BPA / FPO', priority: 'P0', requester: 'Camanducaia', status: 'Em execução', inclusionDate: '2026-01-15', deadline: '2026-01-15', progress: 50 },
            { id: 'T-144', title: 'Duvida gestante ANA PAULA', department: 'Atenção Primária', priority: 'P0', requester: 'Córrego do Bom Jesus', status: 'Concluída', inclusionDate: '2026-01-16', deadline: '2026-01-16', progress: 100 },
            { id: 'T-145', title: 'Verificar emulti DELFIM', department: 'Atenção Primária', priority: 'P0', requester: 'Delfim Moreira', status: 'Não iniciada', inclusionDate: '2026-01-16', deadline: '2026-01-16', progress: 0 },
            { id: 'T-146', title: 'Testar BPA Esus Feedback', department: 'BPA / FPO', priority: 'P0', requester: 'Delfim Moreira', status: 'Não iniciada', inclusionDate: '2026-01-16', deadline: '2026-01-16', progress: 0 }
        ];

        // --- ESTADO ---
        let state = {
            filterStatus: 'Todos',
            filterMunicipality: 'Todos',
            searchTerm: '',
            activeTab: 'list' // 'list' ou 'dashboard'
        };

        // --- INICIALIZAÇÃO ---
        document.addEventListener('DOMContentLoaded', () => {
            renderMunicipalityFilters();
            renderApp();
            
            // Listeners de filtro
            document.getElementById('searchInput').addEventListener('input', (e) => {
                state.searchTerm = e.target.value;
                renderApp();
            });
            document.getElementById('statusFilter').addEventListener('change', (e) => {
                state.filterStatus = e.target.value;
                renderApp();
            });
            document.getElementById('municipalityFilter').addEventListener('change', (e) => {
                state.filterMunicipality = e.target.value;
                renderApp();
            });

            // Form Submit (Agora suporta Criar e Editar)
            document.getElementById('demandForm').addEventListener('submit', (e) => {
                e.preventDefault();
                handleFormSubmit(new FormData(e.target));
            });

            lucide.createIcons();
        });

        // --- LÓGICA DE RENDERIZAÇÃO ---

        function switchTab(tab) {
            state.activeTab = tab;
            
            const btnList = document.getElementById('btn-list');
            const btnDash = document.getElementById('btn-dashboard');
            const dashboardView = document.getElementById('dashboard-view');
            const title = document.getElementById('page-title');

            if (tab === 'list') {
                btnList.className = 'w-full flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium transition-colors bg-[#940969]/10 text-[#940969] shadow-sm';
                btnList.classList.remove('text-gray-600', 'hover:bg-gray-50');
                
                btnDash.className = 'w-full flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium transition-colors text-gray-600 hover:bg-gray-50';
                
                dashboardView.classList.add('hidden');
                title.textContent = 'Gerenciamento de Tarefas';
            } else {
                btnDash.className = 'w-full flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium transition-colors bg-[#940969]/10 text-[#940969] shadow-sm';
                btnDash.classList.remove('text-gray-600', 'hover:bg-gray-50');

                btnList.className = 'w-full flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium transition-colors text-gray-600 hover:bg-gray-50';
                
                dashboardView.classList.remove('hidden');
                title.textContent = 'Painel de Controle';
            }
            renderApp();
        }

        function renderApp() {
            const filtered = getFilteredDemands();
            const stats = calculateStats();

            renderTable(filtered);
            renderDashboardCards(stats);
            document.getElementById('resultsCount').textContent = `Mostrando ${filtered.length} de ${demands.length} resultados`;
            
            lucide.createIcons();
        }

        function getFilteredDemands() {
            return demands.filter(item => {
                const matchesStatus = state.filterStatus === 'Todos' || item.status === state.filterStatus;
                const matchesMunicipality = state.filterMunicipality === 'Todos' || item.requester === state.filterMunicipality;
                const searchLower = state.searchTerm.toLowerCase();
                const matchesSearch = 
                    item.title.toLowerCase().includes(searchLower) || 
                    (item.requester && item.requester.toLowerCase().includes(searchLower)) ||
                    (item.department && item.department.toLowerCase().includes(searchLower));
                
                return matchesStatus && matchesMunicipality && matchesSearch;
            });
        }

        function calculateStats() {
            return {
                total: demands.length,
                completed: demands.filter(d => d.status === 'Concluída').length,
                inProgress: demands.filter(d => d.status === 'Em execução' || d.status === 'REPASSADO').length,
                urgent: demands.filter(d => d.priority === 'P0' && d.status !== 'Concluída').length,
            };
        }

        function renderTable(data) {
            const tbody = document.getElementById('tableBody');
            
            if (data.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="7" class="px-6 py-16 text-center text-gray-400 bg-gray-50/50">
                            <div class="flex flex-col items-center gap-3">
                                <div class="bg-gray-100 p-4 rounded-full"><i data-lucide="search" class="w-8 h-8 text-gray-400"></i></div>
                                <p class="font-medium text-gray-600">Nenhuma tarefa encontrada</p>
                            </div>
                        </td>
                    </tr>`;
                return;
            }

            tbody.innerHTML = data.map(item => `
                <tr class="hover:bg-gray-50 transition-colors group">
                    <td class="px-6 py-4">
                        <span class="text-[10px] text-gray-400 font-mono block mb-1">${item.id}</span>
                        <div class="font-medium text-gray-900 line-clamp-2" title="${item.title}">${item.title}</div>
                    </td>
                    <td class="px-6 py-4">
                        <div class="flex flex-col gap-1">
                            <div class="flex items-center gap-1.5 text-gray-900 font-medium">
                                <i data-lucide="building-2" class="w-3.5 h-3.5 text-gray-400"></i>
                                ${getMunicipalityBadge(item.requester || 'N/A')}
                            </div>
                            <div class="flex items-center gap-1.5 text-xs text-gray-500">
                                <i data-lucide="tag" class="w-3 h-3 text-gray-400"></i>
                                <span class="bg-gray-100 px-1.5 py-0.5 rounded text-gray-600">${item.department || 'Geral'}</span>
                            </div>
                        </div>
                    </td>
                    <td class="px-6 py-4 text-center">
                        ${getPriorityBadge(item.priority)}
                    </td>
                    <td class="px-6 py-4 text-center">
                        <div class="flex justify-center">${getStatusBadge(item.status)}</div>
                    </td>
                    <td class="px-6 py-4">
                        <div class="flex items-center gap-3">
                            <div class="flex-1 bg-gray-200 rounded-full h-2">
                                <div class="h-2 rounded-full transition-all duration-500 ${item.progress === 100 ? 'bg-green-500' : (item.progress > 0 ? 'bg-[#940969]' : 'bg-gray-300')}" 
                                     style="width: ${item.progress}%"></div>
                            </div>
                            <span class="text-xs text-gray-500 font-medium w-8 text-right">${item.progress}%</span>
                        </div>
                    </td>
                    <!-- Colunas de Data Atualizadas -->
                    <td class="px-6 py-4 text-right whitespace-nowrap">
                        ${item.inclusionDate ? `
                            <div class="text-sm text-gray-600">
                                ${new Date(item.inclusionDate).toLocaleDateString('pt-BR', { timeZone: 'UTC' })}
                            </div>` : '<span class="text-gray-300 text-xs italic">-</span>'}
                    </td>
                    <td class="px-6 py-4 text-right whitespace-nowrap">
                        ${item.deadline ? `
                            <div class="flex items-center justify-end gap-1.5 text-gray-600 bg-gray-50 px-2 py-1 rounded inline-block">
                                <i data-lucide="calendar" class="w-3.5 h-3.5"></i>
                                ${new Date(item.deadline).toLocaleDateString('pt-BR', { timeZone: 'UTC' })}
                            </div>` : '<span class="text-gray-300 text-xs italic">Sem prazo</span>'}
                    </td>
                    <td class="px-6 py-4 text-right relative">
                        <button onclick="toggleDropdown(event, '${item.id}')" class="text-gray-400 hover:text-[#940969] p-1 hover:bg-pink-50 rounded transition-colors focus:outline-none">
                            <i data-lucide="more-vertical" class="w-4 h-4"></i>
                        </button>
                        <!-- Menu Suspenso -->
                        <div id="dropdown-${item.id}" class="hidden absolute right-0 mt-2 w-32 bg-white rounded-lg shadow-xl border border-gray-100 z-10 overflow-hidden text-left dropdown-enter">
                            <button onclick="editDemand('${item.id}')" class="w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-[#940969] flex items-center gap-2">
                                <i data-lucide="edit-2" class="w-3.5 h-3.5"></i> Editar
                            </button>
                        </div>
                    </td>
                </tr>
            `).join('');
        }

        // --- FUNCIONALIDADES DE MENU E MODAL ---

        function toggleDropdown(event, id) {
            event.stopPropagation();
            const dropdown = document.getElementById(`dropdown-${id}`);
            const allDropdowns = document.querySelectorAll('[id^="dropdown-"]');
            
            // Fecha outros
            allDropdowns.forEach(d => {
                if(d.id !== `dropdown-${id}`) d.classList.add('hidden');
            });

            if (dropdown.classList.contains('hidden')) {
                dropdown.classList.remove('hidden');
                dropdown.classList.add('dropdown-enter-active');
            } else {
                dropdown.classList.add('hidden');
            }
        }

        function closeAllDropdowns(event) {
            const allDropdowns = document.querySelectorAll('[id^="dropdown-"]');
            allDropdowns.forEach(d => d.classList.add('hidden'));
        }

        function openModal() {
            // Resetar formulário para criação
            document.getElementById('demandForm').reset();
            document.getElementById('demandId').value = ''; 
            document.getElementById('modalTitle').textContent = 'Nova Tarefa';
            
            const modal = document.getElementById('modal');
            modal.classList.remove('hidden');
            modal.classList.add('flex');
        }

        function closeModal() {
            const modal = document.getElementById('modal');
            modal.classList.add('hidden');
            modal.classList.remove('flex');
        }

        function editDemand(id) {
            const item = demands.find(d => d.id === id);
            if (!item) return;

            // Preencher o modal
            document.getElementById('demandId').value = item.id;
            document.getElementById('inputTitle').value = item.title;
            document.getElementById('inputDepartment').value = item.department || 'Atenção Primária';
            document.getElementById('modalMunicipality').value = item.requester || '';
            document.getElementById('inputPriority').value = item.priority || 'P2';
            document.getElementById('inputStatus').value = item.status || 'Não iniciada';
            document.getElementById('inputInclusionDate').value = item.inclusionDate || '';
            document.getElementById('inputDeadline').value = item.deadline || '';

            // Mudar título
            document.getElementById('modalTitle').textContent = 'Editar Tarefa';
            
            // Abrir
            const modal = document.getElementById('modal');
            modal.classList.remove('hidden');
            modal.classList.add('flex');
        }

        function handleFormSubmit(formData) {
            const id = formData.get('id');
            const status = formData.get('status');
            let progress = status === 'Concluída' ? 100 : (status === 'Em execução' ? 50 : 0);

            const newItemData = {
                title: formData.get('title'),
                requester: formData.get('requester'),
                department: formData.get('department'),
                priority: formData.get('priority'),
                status: status,
                inclusionDate: formData.get('inclusionDate'),
                deadline: formData.get('deadline'),
                progress: progress,
            };

            if (id) {
                // EDIÇÃO
                const index = demands.findIndex(d => d.id === id);
                if (index !== -1) {
                    demands[index] = { ...demands[index], ...newItemData };
                }
            } else {
                // CRIAÇÃO
                const newId = `NOVO-${demands.length + 1}`;
                demands.unshift({ id: newId, ...newItemData });
                
                // Atualizar filtro se for município novo
                if (!document.querySelector(`#municipalityFilter option[value="${newItemData.requester}"]`)) {
                    renderMunicipalityFilters();
                }
            }

            renderApp();
            closeModal();
        }

        // --- KPI RENDER ---
        function renderDashboardCards(stats) {
            const container = document.getElementById('dashboard-view');
            const percentCompleted = Math.round((stats.completed / stats.total) * 100) || 0;
            const percentProgress = Math.round((stats.inProgress / stats.total) * 100) || 0;

            container.innerHTML = `
                <!-- TOTAL -->
                <div class="bg-white p-6 rounded-xl border border-gray-200 shadow-sm flex flex-col justify-between hover:shadow-md transition-shadow">
                    <div class="flex justify-between items-start mb-4">
                        <div class="p-3 bg-[#940969]/10 rounded-xl"><i data-lucide="layout-dashboard" class="w-6 h-6 text-[#940969]"></i></div>
                        <span class="text-xs font-bold bg-gray-100 text-gray-600 px-2 py-1 rounded-full">Total</span>
                    </div>
                    <div>
                        <span class="text-gray-500 text-sm font-medium">Tarefas Totais</span>
                        <h3 class="text-3xl font-bold text-gray-800 mt-1">${stats.total}</h3>
                    </div>
                </div>

                <!-- EM EXECUÇÃO -->
                <div class="bg-white p-6 rounded-xl border border-gray-200 shadow-sm flex flex-col justify-between hover:shadow-md transition-shadow">
                    <div class="flex justify-between items-start mb-4">
                        <div class="p-3 bg-yellow-50 rounded-xl"><i data-lucide="clock" class="w-6 h-6 text-yellow-600"></i></div>
                        <span class="text-xs font-bold bg-yellow-100 text-yellow-700 px-2 py-1 rounded-full">${percentProgress}%</span>
                    </div>
                    <div>
                        <span class="text-gray-500 text-sm font-medium">Em Execução</span>
                        <h3 class="text-3xl font-bold text-gray-800 mt-1">${stats.inProgress}</h3>
                    </div>
                </div>

                <!-- CONCLUÍDAS -->
                <div class="bg-white p-6 rounded-xl border border-gray-200 shadow-sm flex flex-col justify-between hover:shadow-md transition-shadow">
                    <div class="flex justify-between items-start mb-4">
                        <div class="p-3 bg-green-50 rounded-xl"><i data-lucide="check-circle-2" class="w-6 h-6 text-green-600"></i></div>
                        <span class="text-xs font-bold bg-green-100 text-green-700 px-2 py-1 rounded-full">${percentCompleted}%</span>
                    </div>
                    <div>
                        <span class="text-gray-500 text-sm font-medium">Concluídas</span>
                        <h3 class="text-3xl font-bold text-gray-800 mt-1">${stats.completed}</h3>
                    </div>
                </div>

                <!-- URGENTES -->
                <div class="bg-white p-6 rounded-xl border border-red-100 shadow-sm flex flex-col justify-between relative overflow-hidden hover:shadow-md transition-shadow group">
                    <div class="absolute right-0 top-0 w-24 h-24 bg-red-50 rounded-bl-full -mr-6 -mt-6 transition-transform group-hover:scale-110"></div>
                    <div class="flex justify-between items-start mb-4 relative z-10">
                        <div class="p-3 bg-red-50 rounded-xl"><i data-lucide="alert-circle" class="w-6 h-6 text-red-600"></i></div>
                    </div>
                    <div class="relative z-10">
                        <span class="text-red-600 font-medium text-sm">Urgência P0</span>
                        <h3 class="text-3xl font-bold text-red-700 mt-1">${stats.urgent}</h3>
                        <p class="text-xs text-red-400 mt-1">Pendentes ou Em execução</p>
                    </div>
                </div>
            `;
        }

        // --- BADGES ---

        function getStatusBadge(status) {
            const styles = {
                'Concluída': 'bg-green-100 text-green-700 border-green-200',
                'Em execução': 'bg-yellow-100 text-yellow-800 border-yellow-200',
                'Não iniciada': 'bg-orange-100 text-orange-700 border-orange-200',
                'REPASSADO': 'bg-indigo-100 text-indigo-700 border-indigo-200',
            };
            const icons = {
                'Concluída': 'check-circle-2',
                'Em execução': 'clock',
                'Não iniciada': 'alert-circle',
                'REPASSADO': 'arrow-right-circle',
            };
            const iconName = icons[status] || 'alert-circle';
            const styleClass = styles[status] || styles['Não iniciada'];

            return `<span class="flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${styleClass}">
                <i data-lucide="${iconName}" class="w-3 h-3 mr-1"></i> ${status}
            </span>`;
        }

        function getPriorityBadge(priority) {
            const styles = {
                'P0': 'bg-red-100 text-red-700 border border-red-200',
                'P1': 'bg-orange-50 text-orange-700 border border-orange-200',
                'P2': 'bg-yellow-50 text-yellow-700 border border-yellow-200',
                'P3': 'bg-blue-50 text-blue-700 border border-blue-200',
            };
            const labels = { 'P0': 'P0 - Urgente', 'P1': 'P1 - Alta', 'P2': 'P2 - Média', 'P3': 'P3 - Baixa' };
            return `<span class="px-2 py-1 rounded text-xs font-bold whitespace-nowrap ${styles[priority] || 'bg-gray-50 text-gray-600'}">${labels[priority] || priority}</span>`;
        }

        function getMunicipalityBadge(municipality) {
            const styles = {
                'Cachoeira de Minas': 'bg-cyan-100 text-cyan-700 border-cyan-200',
                'Camanducaia': 'bg-indigo-100 text-indigo-700 border-indigo-200',
                'Córrego do Bom Jesus': 'bg-emerald-100 text-emerald-700 border-emerald-200',
                'Delfim Moreira': 'bg-violet-100 text-violet-700 border-violet-200',
                'Itapeva': 'bg-rose-100 text-rose-700 border-rose-200',
                'Pedralva': 'bg-amber-100 text-amber-700 border-amber-200',
                'Salto na Gestão': 'bg-slate-100 text-slate-700 border-slate-200',
            };
            const style = styles[municipality] || 'bg-gray-100 text-gray-700 border-gray-200';
            return `<span class="inline-block px-2 py-0.5 rounded text-xs font-semibold border ${style}">${municipality}</span>`;
        }

        function renderMunicipalityFilters() {
            const municipalities = ['Todos', ...new Set(demands.map(d => d.requester || 'Não informado'))].sort();
            const filterSelect = document.getElementById('municipalityFilter');
            const modalSelect = document.getElementById('modalMunicipality');

            filterSelect.innerHTML = municipalities.map(m => `<option value="${m}">${m}</option>`).join('');
            modalSelect.innerHTML = `<option value="" disabled selected>Selecione...</option>` + 
                municipalities.filter(m => m !== 'Todos').map(m => `<option value="${m}">${m}</option>`).join('') +
                `<option value="Outro">Outro / Geral</option>`;
        }

    </script>
</body>
</html>